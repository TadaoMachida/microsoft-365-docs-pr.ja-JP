---
title: デモで Exploit Protection のしくみを確認する
description: Exploit Protection によって、特定のアプリで疑わしい動作が発生するのを防ぐ方法について説明します。
keywords: エクスプロイト保護、エクスプロイト、カーネル、イベント、評価、デモ、試行、軽減策
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
ms.localizationpriority: medium
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.reviewer: ''
manager: dansimp
ms.technology: mde
ms.topic: how-to
ms.collection: m365-security-compliance
ms.date: ''
ms.openlocfilehash: b7f3324de53f1c7d7c92d0c6961a7fec0981a80a
ms.sourcegitcommit: bdd6ffc6ebe4e6cb212ab22793d9513dae6d798c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/08/2022
ms.locfileid: "63327519"
---
# <a name="evaluate-exploit-protection"></a>エクスプロイト保護を評価する

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]

**適用対象:**
- [Microsoft Defender for Endpoint Plan 1](https://go.microsoft.com/fwlink/?linkid=2154037)
- [Microsoft Defender for Endpoint Plan 2](https://go.microsoft.com/fwlink/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> Microsoft Defender ATP を試してみたいですか? [無料試用版にサインアップしてください。](https://signup.microsoft.com/create-account/signup?products=7f379fee-c4f9-4278-b0a1-e4c8c2fcdf7e&ru=https://aka.ms/MDEp2OpenTrial?ocid=docs-wdatp-enablesiem-abovefoldlink)

[エクスプロイト保護は](exploit-protection.md) 、悪用を使用して他のデバイスを拡散および感染させるマルウェアからデバイスを保護するのに役立ちます。 軽減策は、オペレーティング システムまたは個々のアプリに適用できます。 強化された軽減エクスペリエンス Toolkit (EMET) の一部であった機能の多くは、エクスプロイト保護に含まれています。 (EMET はサポートの終了に達しました。

監査では、テスト環境内の特定のアプリに対する軽減策のしくみを確認できます。 これは、運用環境でエクスプロイト保護を有効にした場合 *に発生した* 処理を示します。 これにより、悪用保護が基幹業務アプリに悪影響を及ぼさないことを確認し、疑わしいイベントまたは悪意のあるイベントが発生するかを確認できます。

> [!TIP]
> また、 [demo.wd.microsoft.com](https://demo.wd.microsoft.com?ocid=cx-wddocs-testground) の Microsoft Defender デモ シナリオ Web サイトにアクセスして、エクスプロイト保護のしくみを確認することもできます。

> [!NOTE]
> demo.wd.microsoft.com の Defender for Endpoint デモ サイトは推奨されません。今後削除される予定です。

## <a name="enable-exploit-protection-for-testing"></a>テスト用のエクスプロイト保護を有効にする

Windows セキュリティ アプリまたはWindows PowerShellを使用して、特定のプログラムのテスト モードで軽減策を設定できます。

### <a name="windows-security-app"></a>Windows セキュリティ アプリを開きます。

1. Windows セキュリティ アプリを開きます。 タスク バーでシールド アイコンを選択するか、スタート メニューで **Windows セキュリティ** を検索します。

2. **[アプリ & ブラウザー コントロール**] タイル (または左側のメニュー バーのアプリ アイコン) を選択し、[**Exploit protection**] を選択します。

3. **[プログラムの設定]** に移動し、保護を適用するアプリを選択します。

    1. 構成するアプリが既に一覧表示されている場合は、それを選択し、[**編集]** を選択します。
    2. アプリが一覧の上部に表示されていない場合は、[ **プログラムの追加] を選択してカスタマイズします**。 次に、アプリを追加する方法を選択します。
        - **プログラム名で追加** を使用すると、その名前を持つ実行中のプロセスに軽減策が適用されます。 拡張子を持つファイルを指定します。 完全なパスを入力して、その場所にその名前を持つアプリのみに軽減策を制限できます。
        - 標準のWindows エクスプローラー のファイル ピッカー ウィンドウを使用して、目的のファイルを検索して選択するには、[**正確なファイル パス** の選択] を使用します。

4. アプリを選択すると、適用できるすべての軽減策の一覧が表示されます。 **監査** を選択すると、監査モードでのみ軽減策が適用されます。 プロセス、アプリ、またはWindowsを再起動する必要がある場合は、通知が表示されます。

5. 構成するすべてのアプリと軽減策について、この手順を繰り返します。 構成の設定が完了したら、[ **適用]** を選択します。

### <a name="powershell"></a>PowerShell

アプリ レベルの軽減策を監査モードに設定するには、**監査モード** コマンドレットと共に使用`Set-ProcessMitigation`します。

次の形式で各軽減策を構成します。

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

ここで、

- \<Scope\>:
  - `-Name` を使用して、軽減策を特定のアプリに適用する必要があることを示します。 このフラグの後にアプリの実行可能ファイルを指定します。
- \<Action\>:
  - `-Enable` 軽減策を有効にする
    - `-Disable` 軽減策を無効にするには
- \<Mitigation\>:
  - 次の表で定義されている軽減策のコマンドレット。 各軽減策はコンマで区切られます。

|軽減策|監査モードコマンドレット|
|---|---|
|任意の Code Guard (ACG)|`AuditDynamicCode`|
|整合性が低いイメージのブロック|`AuditImageLoad`
|信頼されていないフォントのブロック|`AuditFont`, `FontAuditOnly`|
|コードの整合性ガード|`AuditMicrosoftSigned`, `AuditStoreSigned`|
|Win32k システム コールの無効化|`AuditSystemCall`|
|子プロセスを許可しない|`AuditChildProcess`|

たとえば、 *testing.exe* という名前のアプリの監査モードで任意の Code Guard (ACG) を有効にするには、次のコマンドを実行します。

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable AuditDynamicCode
```

に置き換えることで **、監査モード** を`-Enable``-Disable`無効にすることができます。

## <a name="review-exploit-protection-audit-events"></a>エクスプロイト保護監査イベントを確認する

ブロックされたアプリを確認するには、イベント ビューアーを開き、Security-Mitigations ログで次のイベントをフィルター処理します。<br/><br/>

|特徴|プロバイダー/ソース|イベント ID|説明|
|---|---|--|---|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|1|ACG の監査|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|3|[Do not allow child processes] (子プロセスを許可しない) 監査|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|5|[Block low integrity images] (整合性が低いイメージのブロック) 監査|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|7 |[Block remote images] (リモート イメージのブロック) 監査|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|9 |[Disable win32k system calls] (win32k システム呼び出しの無効化) 監査|
|エクスプロイト保護|Security-Mitigations (カーネル モード/ユーザー モード)|11|[Code integrity guard] (コードの整合性の保護) 監査|

## <a name="see-also"></a>関連項目

- [エクスプロイト保護を有効にする](enable-exploit-protection.md)
- [Exploit Protection 軽減策の構成と監査](customize-exploit-protection.md)
- [エクスプロイト保護構成のインポート、エクスポート、展開](import-export-exploit-protection-emet-xml.md)
- [Exploit Protection のトラブルシューティング](troubleshoot-exploit-protection-mitigations.md)
