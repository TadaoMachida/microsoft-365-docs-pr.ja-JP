---
title: SharePoint または OneDrive に保存されているレコードを更新するためにレコードのバージョン管理を使用する
f1.keywords:
- NOCSH
ms.author: cabailey
author: cabailey
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: conceptual
ms.service: O365-seccomp
ms.localizationpriority: high
ms.collection:
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
description: Microsoft 365 でのレコード管理ソリューションの実装に役立つレコードについて説明します。
ms.openlocfilehash: 7fc4f9bb14e9e49c7894e864b8ff9e8f4337149a
ms.sourcegitcommit: 5eff41a350a01e18d9cdd572c9d8ff99d6c9563a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/13/2022
ms.locfileid: "64835889"
---
# <a name="use-record-versioning-to-update-records-stored-in-sharepoint-or-onedrive"></a>SharePoint または OneDrive に保存されているレコードを更新するためにレコードのバージョン管理を使用する

>*[セキュリティとコンプライアンスのための Microsoft 365 ライセンス ガイダンス](/office365/servicedescriptions/microsoft-365-service-descriptions/microsoft-365-tenantlevel-services-licensing-guidance/microsoft-365-security-compliance-licensing-guidance)。*

> [!NOTE]
> 規制レコードは編集をブロックしているため、規制レコードのレコードのバージョン管理は利用できません。
>
> 規制レコードを使用していない場合でも、テナントのレコードのバージョン管理を防止することもできます。Microsoft 365 コンプライアンス センター > **[レコード管理設定]** > **[保持ラベル]** > **[レコード バージョン管理の設定]** の **レコード管理** ノードに移動し、**[レコードのバージョン管理を有効にする]** の設定をオフにします。

ドキュメントを[[レコード]](records-management.md#records) としてマークし、レコードに対して実行できるアクションを制限する機能は、レコード管理ソリューションにとって不可欠な目標です。ただし、ユーザーが後続のバージョンを作成するためにコラボレーションが必要になる場合もあります。

たとえば、販売契約をレコードとしてマークする場合、新しい条件で契約を更新し、そして前のレコード バージョンを保持したまま最新バージョンを新しいレコードとしてマークする必要があります。 これらのタイプのシナリオでは、SharePoint と OneDrive が *レコードのバージョン管理* をサポートしています。 OneNote ノートブックのフォルダーは、レコードのバージョン管理をサポートしていません。

レコードのバージョン管理を使用するには、まず [アイテムをレコードとしてマークするように構成された保持ラベル](declare-records.md) でドキュメントにラベルを付けます。 この時点で、*［レコードの状態］* というドキュメント プロパティが保持ラベルの横に表示されます。 ラベルが既定でレコードのロックを解除するように構成されているかどうか (現在ロールアウト中) に応じて、初期レコードの状態は **［ロック済み］** または **［ロック解除］** のいずれかになります。

次のことができます。

- **レコード ステータス プロパティをロック解除およびロックすることにより、ドキュメントの個々のバージョンをレコードとして継続的に編集および保持します。** **レコード ステータス** プロパティが **ロックされています** に設定されている場合のみ、新しいバージョンのレコードが保持されます。 このロックとロック解除の切り替えにより、ドキュメントの不要なバージョンおよびコピーを保持するリスクが軽減されます。
    
    > [!NOTE]
    > 既定でレコードのロックを解除するようにラベルが構成されていても、管理者によってバージョン管理が有効になっていない場合、またはレコード管理設定によって禁止されている場合、ユーザーはロック後にドキュメントのロックを解除できません。

- **サイトにあるインプレース レコード リポジトリにレコードを自動的に保存します。** SharePoint および OneDrive の各サイト コレクションは、アイテム保管ライブラリのコンテンツを保持します。 レコード バージョンは、このライブラリの [レコード] フォルダーに保存されます。 アイテム保管ライブラリのしくみの詳細については、「[SharePoint と OneDrive の保持のしくみ](retention-policies-sharepoint.md#how-retention-works-for-sharepoint-and-onedrive)」を参照してください。

- **すべてのバージョンを含むエバーグリーン ドキュメントを維持します。** 既定では、各 SharePoint および OneDrive ドキュメントには、アイテム メニューで利用可能なバージョン履歴があります。 このバージョン履歴ではどのバージョンがレコードであるかを簡単に確認し、それらのドキュメントを表示できます。

> [!TIP]
> 保持ラベルに削除アクションを設定して、レコードのバージョン管理を使用する場合は、保持設定の **[Start the retention period based on:](保持期間の開始条件:)** を **[When items were labeled](アイテムにラベルが付けられたとき)** に設定することを検討してください。 このラベル設定では、新しいレコード バージョンごとに保持期間の開始がリセットされます。これにより、常に以前のバージョンが新しいバージョンよりも先に削除されるようになります。

既定では、レコードのバージョン管理は、アイテムをレコードとしてマークする保持ラベルが適用されているすべてのドキュメントで自動的に使用可能になります。そのラベルは [サイトに発行](create-apply-retention-labels.md) されています。 ユーザーが詳細ウィンドウでドキュメントのプロパティを表示すると、**［レコード ステータス］** が **［ロック済み］** から **［ロック解除］** に切り替わります。

ドキュメントのロックが解除されている間、標準の編集権限を持つすべてのユーザーがファイルを編集できます。 ただし、これはまだレコードであるため、ユーザーはファイルを削除することができません。 編集が完了すると、**レコードの状態** を **ロック解除** から **ロック済み** に切り替えることができ、この状態の間はそれ以上の編集ができなくなります。
<br/><br/>

:::image type="content" alt-text="レコードとしてタグ付けされたドキュメントのレコード ステータス プロパティ。" source="../media/recordversioning8.png" lightbox="../media/recordversioning8.png":::

レコードがロックまたはロック解除されたときに許可されるユーザー 操作の詳細については、「[許可またはブロックされるアクションの制限の比較](records-management.md#compare-restrictions-for-what-actions-are-allowed-or-blocked)」 を参照してください。

## <a name="locking-and-unlocking-a-record"></a>レコードのロックおよびロック解除

コンテンツをレコードとしてマークする保持ラベルがドキュメントに適用された後、投稿権限またはより狭い権限レベルを持つユーザーは、レコードをロック解除したり、ロック解除されたレコードをロックしたりできます。
<br/><br/>

:::image type="content" alt-text="レコード ステータスは、レコード ドキュメントがロック解除されていることを示しています。" source="../media/recordversioning9.png" lightbox="../media/recordversioning9.png":::

レコードのロックが解除されると、次の操作が行われます。

1. 現在のサイト コレクションにアイテム保管ライブラリがない場合は、それが作成されます。

2. アイテム保管ライブラリに [レコード] フォルダーがない場合は、[レコード] フォルダーが作成されます。

3. [**コピー先**] アクションは、ドキュメントの最新バージョンを [レコード] フォルダーにコピーします。 [**コピー先**] アクションには最新バージョンのみが含まれ、以前のバージョンは含まれません。 このコピーされたドキュメントはドキュメントのレコード バージョンと見なされ、ファイル名の形式は以下のようになります: \[タイトル GUID バージョン\#\]

4. [レコード] フォルダーに作成されたコピーは元のドキュメントのバージョン履歴に追加され、このバージョンでは、[コメント] フィールドに **レコード** という単語が表示されます。

5. 元のドキュメントは、編集可能ですが削除はされない、新しいバージョンです。 ドキュメントが編集可能になった場合でもドキュメントはまだレコードであるため、ドキュメント ライブラリの [**アイテムはレコードです**] 列には引き続き [**はい**] の値が表示されます。

ユーザーがレコードをロックすると、元のドキュメントは再び編集ができなくなります。 ただしこれは、バージョンをアイテム保管ライブラリの [レコード] フォルダーにコピーするレコードのロックを解除するアクションです。

## <a name="record-versions"></a>レコードのバージョン

ユーザーがレコードのロックを解除するたびに、最新バージョンがアイテム保管ライブラリにコピーされ、そのバージョンには **レコード** の値がバージョン履歴の **コメント** フィールドに含まれます。
<br/><br/>

:::image type="content" alt-text="アイテム保管ライブラリに表示されるレコード。" source="../media/recordversioning10.png" lightbox="../media/recordversioning10.png":::

バージョン履歴を表示するには、ドキュメント ライブラリでドキュメントを選択し、[アイテム] メニューの [**バージョン履歴**] をクリックします。

## <a name="searching-the-audit-log-for-record-versioning-events"></a>レコードのバージョン管理イベントの監査ログの検索

レコードのロックおよびロック解除のアクションは、監査ログに記録されます。 **[ファイル アクティビティとページ アクティビティ]** から、**[レコードのステータスがロックに変更されました]** と **[レコード ステータスが、ロック解除に変更されました]** を選択します。

これらのイベントの検索に関する詳細情報については、「[検索ローグの検索](search-the-audit-log-in-security-and-compliance.md#file-and-page-activities)」を参照してください。

## <a name="next-steps"></a>次の手順

レコード管理でサポートされているその他のシナリオについては、「[レコード管理の一般的なシナリオ](get-started-with-records-management.md#common-scenarios)」を参照してください。
