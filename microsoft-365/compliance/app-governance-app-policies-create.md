---
title: アプリ ポリシーを作成する
f1.keywords:
- NOCSH
ms.author: v-tophillips
author: v-tophillips
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.collection: m365-security-compliance
ms.localizationpriority: high
search.appverid:
- MOE150
- MET150
description: アプリ ポリシーを作成します。
ms.openlocfilehash: 25aa33fad47abd5faebb90b28b47564f32d6b008
ms.sourcegitcommit: d4b867e37bf741528ded7fb289e4f6847228d2c5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/06/2021
ms.locfileid: "60204541"
---
# <a name="create-app-policies"></a>アプリ ポリシーを作成する

>*[セキュリティとコンプライアンスのための Microsoft 365 ライセンス ガイダンス](https://aka.ms/ComplianceSD)。*

Microsoft アプリ ガバナンスのアプリ ポリシーには一連の機能が組み込まれており、以下の方法でアプリの異常な動作を検出してアラートを生成します。

- アプリ ガバナンスがアプリの動作を警告し、自動または手動で修復するための条件を指定します。
- 組織にアプリ コンプライアンス ポリシーを実装します。

アプリ ポリシーは、カスタマイズ可能な提供済みテンプレートから作成することもできますし、独自のカスタム アプリ ポリシーを作成することもできます。

新しいアプリ ポリシーを作成するには **[Microsoft 365 コンプライアンス センター] > [アプリ ガバナンス] > [概要ページ] > [ポリシー]** に移動します。

- アプリの使用向けに設計されたテンプレートを使用して新しいアプリ ポリシーを作成するには、**[アプリの使用ポリシーの作成]** の下の **[ポリシーの作成]** を選択します。
- アプリのアクセス許可向けに設計されたテンプレートを使用して新しいアプリ ポリシーを作成するには、**[アクセス許可ポリシーの作成]** の下の **[ポリシーの作成]** を選択します。
- アプリ認証またはカスタム ポリシー向けの新しいアプリ ポリシーを作成するには、**[新規作成]** を選択します。

## <a name="app-policy-templates"></a>アプリ ポリシー テンプレート

アプリ ポリシー テンプレートに基づいて新しいアプリ ポリシーを作成するには、**[アプリ ポリシー テンプレートの選択] ページ** で、アプリ・テンプレートのカテゴリーを選択し、テンプレートの名前を選択して、**[次へ]** を選択します。

アプリ ガバナンスには、3 つのカテゴリーのアプリ ポリシー テンプレートがあります。

### <a name="app-users-and-data-access"></a>アプリ ユーザーとデータ アクセス

アプリ ガバナンスには、これらのテンプレートが含まれており、アプリの使用状況に関するアラートを生成します。

<br>

****

|テンプレート名|説明|
|---|---|
|大量のデータ アクセスが可能な新しいアプリ|大量のデータ アクセスが可能な最近登録されたアプリを強調表示し、それらのデータ パターンが期待されたものであることを確認します。 <p> 既定では、このポリシーは、過去7日間に登録され、その期間に 1 GB を超えるデータ アクセスがあったすべてのアプリにフラグを設定します。 このポリシーは、より多くの条件とアクションでカスタマイズできます。|
|||

### <a name="app-permissions"></a>アプリの権限

アプリ ガバナンスには、これらのテンプレートが含まれており、アプリのアクセス許可に関するアラートを生成します。

<br>

****

|テンプレート名|説明|
|---|---|
|過度な特権を有するアプリ|付与されたアクセス許可が使用されているアクセス許可よりも多いアプリを強調表示し、アクセス許可を削減できる機会を特定します。 <p> 既定では、このポリシーは、90 日間使用されなかった場合、過度な特権を有するとしてマークされたすべてのアプリにフラグを設定します。 この時間帯フィルターは、詳細な条件やアクションをカスタマイズすることができます。|
|高い特権のアクセス許可を持つ新しいアプリ|このポリシーでは、高い特権のアクセス許可があるすべての新しいアプリを強調表示して、詳しい調査が必要な占有領域の大きいアプリを特定します。 <p> 既定では、このポリシーは、過去 7 日以内に登録された、対象範囲の広いアクセス許可があるすべてのアプリにフラグを設定します。|
|||

### <a name="m365-certification"></a>M365 認定

M365 ガバナンスには、これらのテンプレートが含まれており、アプリ証明書に関するアラートを生成します。

<br>

****

|テンプレート名|説明|
|---|---|
|認証されていない新しいアプリ|M365 認証プロセスを経ていない新しいアプリを強調表示して、テナントで期待されていることを確認します。 <p> 既定では、このポリシーは、過去 7 日間に登録され、認定されていないすべてのアプリにフラグを設定します。|
|||

## <a name="custom-app-policies"></a>カスタム アプリ ポリシー

カスタム アプリ ポリシーは、組み込みのテンプレートの 1 つではまだ実行されていないことを行う必要がある場合に使用します。

新しいカスタム アプリ ポリシーを作成するには、まず **[ポリシー]** ページで **[新規作成]** を選択します。 **[アプリ ポリシー テンプレートの選択] ページ** で、**[カスタム]** カテゴリ、**[カスタム ポリシー]** テンプレートの順に選択し、**[次へ]** を選択します。

**[名前と説明]** ページで、次の設定を構成します。

- ポリシー名

- ポリシーの説明

- ポリシーの重大度を選択して、このポリシーで生成されるアラートの重大度を設定します。

  - 高
  - 中
  - 低

**[ポリシーの設定と条件を選択]** ページで、**このポリシーの対象となるアプリを選択します** に以下の設定を選択します。

- すべてのアプリ
- 特定のアプリを選択する

  1 つのウィンドウで 1 つ以上のアプリを選択できます。**[追加]** を選択します。

**[次へ]** を選択します。

**[ポリシーの設定と条件を選択]** ページで、**[ポリシーに新しい条件を設定]** を選択し、**[次へ]** を選択します。

**[ルールの作成]** ウィンドウでは、新しいルールの条件を選択できます。 **[条件の追加]** を選択し、条件の一覧から選択して、条件の値を指定します。 複数の条件を追加できます。

カスタム アプリ ポリシーで利用可能な条件は以下のとおりです。

<br>

****

|条件|承諾済みの条件値|詳細情報|
|---|---|---|
|アプリの登録年齢|過去 X 日以内||
|アプリ証明書|基本的なコンプライアンス、MCAS コンプライアンス、または該当なし|[Microsoft 365 認定](/microsoft-365-app-certification/docs/enterprise-app-certification-guide)|
|Publisher の検証|[はい] または [いいえ]|[Publisher の検証](/azure/active-directory/develop/publisher-verification-overview)|
|アプリケーションのアクセス許可|1 つ以上のエントリをリストから選択します。|[Microsoft Graph のアクセス許可のリファレンス](/graph/permissions-reference)|
|委任されたアクセス許可|1 つ以上の API アクセス許可をリストから選択します|[Microsoft Graph のアクセス許可のリファレンス](/graph/permissions-reference)|
|高特権|[はい] または [いいえ]|これは、MCAS で使用されるものと同じ論理に基づいた内部名称です。|
|過度な特権を有するアプリ|[はい] または [いいえ]|使用されているアクセス許可よりも多くのアクセス許可が付与されているアプリ。|
|アプリのデータ アクセス|毎時 X GB 以上のデータ アクセス||
|アプリのデータ アクセスの傾向|過去 7 日間でデータ使用率が X% 増加||
|アプリ API アクセス|毎時 X 以上の API 呼び出し||
|アプリ API のアクセス傾向|過去 7 日間の API 呼び出しが X% 増加||
|同意済みユーザー|(大なり小なり) X 人の同意済みユーザー||
|同意済み優先ユーザー|[はい] または [いいえ]|[優先アカウント](/microsoft-365/admin/setup/priority-accounts)を持つユーザー。|
|同意済みアプリ|リストからユーザーを選択する||
|ユーザーの役割に同意する|1 つ以上選択: Teams 管理者、ディレクトリ リーダー、セキュリティ リーダー、コンプライアンス管理者、セキュリティ管理者、ヘルプデスク管理者、SharePoint 管理者、Exchange 管理者、グローバル リーダー、グローバル管理者、コンプライアンスデータ管理者、ユーザー管理者、サービス サポート管理者|複数の選択が可能です。 <p> メンバーが割り当てられている Azure AD ロールを、このリストで利用できるようにする必要があります。|
|ワークロードにアクセス済み|OneDrive、SharePoint、Exchange|複数の選択が可能です。|
|エラー率|過去 7 日間のエラー率が X% を超えています (X は管理者が定義した値)。||
||||

このアプリ ポリシーがアラートを生成するには、指定された条件をすべて満たす必要があります。

条件の指定が完了したら、**[保存]** を選択し、**[次へ]** を選択します。

**[ポリシー アクションを定義する]** ページで、このポリシーに基づくアラートが生成された場合にアプリ ガバナンスでアプリを無効にしたい場合は、**[アプリを無効にする]** を選択し、**[次へ]** を選択します。

**[ポリシー状態を定義する]** ページで、以下のいずれかのオプションを選択します。

- **監査モード**: ポリシーは評価されますが、構成済みアクションは発生しません。 監査モード ポリシーは、ポリシーのリストに **[監査]** の状態で表示されます。
- **アクティブ**: ポリシーは評価され、構成済みアクションが発生します。
- **非アクティブ**: ポリシーは評価されず、構成済みアクションは発生しません。

## <a name="create-a-custom-policy"></a>カスタム ポリシーを作成する

アプリ ガバナンスには、テナント内のアプリを監視する上で便利なポリシーを簡単に作成できる、基本的なテンプレートがいくつか用意されています。

1. アプリガバナンス ページで、**[ポリシー]** タブを選択します。
1. **[ポリシーの作成]** を選択します。
1. **[カテゴリ]** で **[カスタム]** を選択します。 **[テンプレート]** から、**[カスタム ポリシー]** を選択します。 **[次へ]** を選択します。
1. ポリシーの名前を入力し、説明を入力し、**[ポリシーの重要度]** のドロップダウン リストで重要度を選択します。**[次へ]** を選択します。
1. **[いいえ、ポリシーをカスタマイズします]**、**[次へ]** の順に選択します。
1. このポリシーをテナント内のすべてのアプリに適用するか、特定のアプリを選択するかを選択します。 このポリシーの特定のアプリを選択する場合は **[アプリの追加]** を選択し、リストから目的のアプリを選択します。 **[アプリの選択]** ウィンドウで、このポリシーを適用する複数のアプリを選択し、**[追加]** を選択します。 リストに問題がなければ **[次へ]** を選択します。
1. **[ポリシーの新しい条件を設定する]** を選択し **[条件の編集]** を選択します。 **[条件の追加]** を選択し、リストから条件を選択して、適用する条件を選択します。 その他の条件を追加するには、繰り返します。 **[保存]** を選択してルールを保存し、ルールの追加が完了したら、**[次へ]** を選択します。
1. 既定では、このポリシーは条件を満たしたときにアラートをトリガーします。 **[アプリを無効にする]** などのポリシーがトリガーされた際にアクションを実行することを選択できます。 ポリシーがユーザーと正当なアプリの使用に影響を与える可能性があるため、アクションを適用するときは注意してください。 **[次へ]** を選択します。
1. ポリシーの状態を選択します:
    - **監査** - ポリシーの評価はアクティブですが、ポリシーの処理は無効になっています。
    - **アクティブ** - ポリシーの評価とポリシーの処理がアクティブです。
    - **非アクティブ** - ポリシーの評価とポリシーの処理が無効です。
  
    新しいポリシーをテストする場合は、監査モードを使用する必要があります。**[次へ]** を選択します。
1. カスタム ポリシーのすべてのパラメーターを慎重に確認します。 問題がなければ **[送信]** を選択します。 戻って設定を変更するには、いずれかの設定の下にある **[編集]** を選択します。

## <a name="test-and-monitor-your-new-app-policy"></a>新しいアプリ ポリシーのテストと監視

アプリ ポリシーが作成されたら、**[ポリシー]** ページで監視し、テスト中に想定される数のアクティブなアラートと合計アラートが登録されていることを確認する必要があります。

![強調表示されたポリシーを含む Microsoft 365 コンプライアンス センターの MAPG ポリシーの概要ページ。](..\media\manage-app-protection-governance\mapg-cc-policies-policy.png)

アラートの数が想定外に少ない場合は、アプリ ポリシーの設定を編集して、状態を設定する前に正しく構成されていることを確認してください。

ここでは、新しいポリシーを作成し、それをテストしてからアクティブにするまでのプロセスの例を示します。

1. 重大度、アプリ、条件、アクションを初期値に設定し、状態を **[監査モード]** に設定した新しいポリシーを作成します。
2. 生成されたアラートなど、期待される動作を確認します。
3. 想定外の動作の場合は、必要に応じてポリシー アプリ、条件、アクションの設定を編集し、手順 2 に戻ります。
4. 想定どおりの動作であれば、ポリシーを編集して、状態を **[アクティブ]** に変更します。

![アプリ ポリシー作成のワークフロー。](../media/manage-app-protection-governance/mapg-create-new-policy-process.png)

## <a name="next-step"></a>次の手順

[アプリ ポリシーを管理します。](app-governance-app-policies-manage.md)
