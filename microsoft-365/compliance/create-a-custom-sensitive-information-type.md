---
title: カスタムの機密情報の種類を使用する前に
f1.keywords:
- NOCSH
ms.author: chrfox
author: chrfox
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.date: ''
ms.localizationpriority: medium
ms.collection:
- M365-security-compliance
search.appverid:
- MOE150
- MET150
description: セキュリティ コンプライアンス センターで DLP のカスタム機密情報の種類を作成、変更、削除、およびテストする&説明します。
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: ee45db291cef56784f254ea1af481d873d2810ca
ms.sourcegitcommit: 8410a49995a084e4cc9b3f7286c8d506b7a85d79
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/11/2021
ms.locfileid: "60914574"
---
# <a name="get-started-with-custom-sensitive-information-types"></a>カスタムの機密情報の種類を使用する前に

事前構成の機密情報の種類がニーズを満たしていない場合は、完全に定義した独自のカスタムの機密情報の種類を作成するか、事前構成のいずれかをコピーして変更できます。

この方法を使用して作成されるカスタムの機密情報の種類は、`Microsoft.SCCManaged.CustomRulePack`という名前のルール パッケージに追加されます。

新しい機密情報の種類を作成するには、次の 2 つの方法があります。

- [すべての要素を完全に定義するところから](#create-a-custom-sensitive-information-type)
- [既存の機密情報の種類をコピーおよび変更する](#copy-and-modify-a-sensitive-information-type)


## <a name="before-you-begin"></a>開始する前に

- 機密情報の種類とその構成に精通している必要があります。 「[機密情報の種類に関する詳細情報](sensitive-information-type-learn-about.md)」を参照してください。 次の役割を理解することが重要です。
    - [正規表現](https://www.boost.org/doc/libs/1_68_0/libs/regex/doc/html/) - Microsoft 365 の機密情報の種類は Boost.RegEx 5.1.3 エンジンを使用する
    - キーワード リスト - 機密情報の種類を定義する際に独自のキーワードを作成することも、既存のキーワード リストから選択することもできます。
    - [キーワード辞書](create-a-keyword-dictionary.md)
    - [関数](what-the-dlp-functions-look-for.md)
    - [信頼度レベル](sensitive-information-type-learn-about.md#more-on-confidence-levels)
 
- UI を使用してカスタムの機密情報の種類を作成、テスト、展開するには、グローバル管理者またはコンプライアンス管理者のアクセス許可が必要です。 Office 365 で「[管理者ロールについて](/office365/admin/add-users/about-admin-roles)」を参照してください。

- 組織には、データ損失防止 (DLP) を含む Office 365 Enterprise などのサブスクリプションが必要です。 [メッセージング ポリシーとコンプライアンス サービスの説明](/office365/servicedescriptions/exchange-online-protection-service-description/messaging-policy-and-compliance-servicedesc)を参照してください。 


> [!IMPORTANT]
> Microsoft カスタマー サービス/サポートでは、カスタム分類または正規表現パターンの作成をサポートしていません。 サポート エンジニアは、たとえば、テスト目的のサンプルの正規表現パターンを提供したり、期待通りにトリガーされない既存の正規表現パターンのトラブルシューティングをサポートしたりなど、機能に対する限定的なサポートを提供しますが、カスタムのコンテンツ一致の開発でユーザーの要件を満たしたり、義務を果たしたりすることを確約するわけではありません。

## <a name="create-a-custom-sensitive-information-type"></a>カスタムの機密情報の種類を作成する

完全に定義した新しい機密情報の種類を作成するには、次の手順を実行します。 

1. コンプライアンス センターで、[データ分類] [機密情報の種類] \> **に移動し、[** 機密情報の **種類の作成] を選択します**。
2. **[名前]** および **[説明]** の値を入力し、**[次へ]** を選択します。
3. **[パターンの作成]** を選択します。 新しい機密情報の種類を定義するときに、それぞれ異なる要素と信頼度レベルを持つ複数のパターンを作成できます。
4. パターンの既定の信頼度レベルを選択します。 値は、**[低い信頼度]**、**[中程度の信頼度]**、および **[高い信頼度]** です。
5. **[主要要素]** を選択して定義します。 主要要素は、オプションの検証を使用した **[正規表現]**、**[キーワード リスト]**、**[キーワード辞書]**、または事前構成の **[関数]** のいずれかです。 DLP 関数の詳細については、「[DLP 関数で探索する内容](what-the-dlp-functions-look-for.md)」を参照してください。 日付とチェックサム検証ツールの詳細については、「正規表現検証ツールの詳細 [」を参照してください](#more-information-on-regular-expression-validators)。
6. **[文字の近接度]** の値を入力します。
7. (省略可能) サポート要素がある場合は追加します。 サポート要素は、オプションの検証、キーワード リスト、キーワード辞書、または事前定義された関数のいずれかを使用する正規表現です。 サポート要素は、独自の **Character 近接構成を持つ場合** があります。 
8. (省略可能) 使用可能なチェックのリストから [**追加チェック**](#more-information-on-additional-checks)を追加します。
9. **[作成]** を選択します。
10. **[次へ]** を選択します。
11. この機密情報の種類に対して、**推奨される信頼度レベル** を選択します。
12. 設定を確認し、**[送信]** を選択します。

> [!IMPORTANT]
> Microsoft 365 では、検索クローラーを使用して、SharePoint Online および OneDrive for Business のサイトの機密情報を特定して分類します。 既存のコンテンツで新しいカスタムの機密情報の種類を特定するには、そのコンテンツを再クロールする必要があります。 コンテンツは、スケジュールに基づいてクロールされますが、サイト コレクション、リスト、またはライブラリのコンテンツを手動で再クロールすることができます。 詳細については、「[サイト、ライブラリ、またはリストのクロールおよび再インデックスの手動要求](/sharepoint/crawl-site-content)」を参照してください。

13. **[データの分類]** ページに、すべての機密情報の種類が一覧表示されます。 **[更新]** を選択し、閲覧または検索ツールを使用して、作成した機密情報の種類を検索します。

## <a name="test-a-sensitive-information-type"></a>機密情報の種類をテストする

リスト内の任意の機密情報の種類をテストできます。 ポリシーで使用する前に、作成するすべての機密情報の種類をテストすることを推奨します。

1. Word 文書のように、2 つのファイルを準備します。 機密情報の種類で指定した要素と一致するコンテンツと一致しないコンテンツ。
2. コンプライアンス センターで、**[データの分類]** \> **[機密情報の種類]** の順に移動し、リストから機密情報の種類を選択して詳細ウィンドウを開き、**[テスト]** を選択します。
3. ファイルをアップロードし、**[テスト]** を選択します。
4. **[結果と一致]** ページで、結果を確認して **[完了]** を選択します。

## <a name="modify-custom-sensitive-information-types-in-the-compliance-center"></a>コンプライアンス センターでカスタムの機密情報の種類を変更する

1. コンプライアンス センターで、**[データの分類]** \> **[機密情報の種類]** の順に移動し、変更する機密情報の種類をリストから選択して **[編集]** を選択します。
2. 固有の重要要素およびサポート要素、信頼度レベル、文字の近接度、[**追加チェック**](#more-information-on-additional-checks)で、その他のパターンを追加、もしくは既存のパターンの編集と削除を行うことができます。

## <a name="remove-custom-sensitive-information-types-in-the-compliance-center"></a>コンプライアンス センターでカスタムの機密情報の種類を削除する 

> [!NOTE]
> カスタムの機密情報の種類のみを削除できます。組み込みの機密情報の種類は削除できません。

> [!IMPORTANT]
> カスタムの機密情報の種類を削除する前に、その機密情報の種類を参照している DLP ポリシーまたは Exchange メール フロー ルール (別名: トランスポート ルール) がないことを確認してください。

1. コンプライアンス センターで、**[データの分類]** \> **[機密情報の種類]** の順に移動し、削除したいリストから機密情報の種類を選択します。
2. 開くフライアウトで、**[削除]** を選択します。

## <a name="copy-and-modify-a-sensitive-information-type"></a>機密情報の種類をコピーおよび変更する

既存の機密情報の種類に基づいて新しい機密情報の種類を作成するには、次の手順を実行します。 

1. コンプライアンス センターで、**[データの分類]** \> **[機密情報の種類]** の順に移動し、コピーする機密情報の種類を選択します。
2. フライアウトで、**[コピー]** を選択します。
3. 機密情報の種類のリストから **[更新]** を選択し、作成したコピーを参照または検索します。 部分的な文字列の検索が機能するため、`copy` だけを検索すると、名前に `copy` という単語が含まれるすべての機密情報の種類が返されます。 
4. **[名前]** および **[説明]** の値を入力し、**[次へ]** を選択します。
5. 機密情報の種類のコピーを選択し、**[編集]** を選択します。 
6. 新しい機密情報の種類に新しい **[名前]** および **[説明]** を指定します。
7. 既存のパターンを編集または削除し、新しいパターンを追加できます。 新しいパターンの既定の信頼度レベルを選択します。 値は、**[低い信頼度]**、**[中程度の信頼度]**、および **[高い信頼度]** です。
8. **[主要要素]** を選択して定義します。 主要要素は、**[正規表現]**、**[キーワード リスト]**、**[キーワード辞書]**、または事前構成の **[関数]** のいずれかです。 「[DLP 関数の検索対象](what-the-dlp-functions-look-for.md)」を参照してください。
9. **[文字の近接度]** の値を入力します。
10. (省略可能) **[サポート要素]** または任意の [**[追加チェック]**](#more-information-on-additional-checks)がある場合は、それらを追加します。 必要に応じて、**[サポート要素]** をグループ化できます。
11. **[作成]** を選択します。
12. **[次へ]** を選択します。
13. この機密情報の種類に対して、**推奨される信頼度レベル** を選択します。
14. 設定を確認し、**[送信]** を選択します。

> [!NOTE]
> これらの SIT はコピーされません。
> - カナダの運転免許証番号
> - EU の運転免許証番号
> - EU の国民識別番号
> - EU パスポート番号
> - EU 社会保障番号または同等の ID
> - EU 税の識別番号
> - 病気の国際分類 (ICD-10-CM)
> - 病気の国際分類 (ICD-9-CM)
> - 米国の運転免許証番号

PowerShell および Exact Data Match の機能を使用して、カスタムの機密情報の種類を作成することもできます。 これらの方法の詳細については、次を参照してください。
- [セキュリティ/コンプライアンス センター PowerShell でカスタムの機密情報の種類を作成する](create-a-custom-sensitive-information-type-in-scc-powershell.md)
- [正確なデータ一致に基づく機密情報の種類について説明します。](sit-learn-about-exact-data-match-based-sits.md#learn-about-exact-data-match-based-sensitive-information-types)

## <a name="more-information-on-regular-expression-validators"></a>正規表現検証ツールの詳細

### <a name="checksum-validator"></a>チェックサム検証ツール

正規表現で数字にチェックサムを実行する必要がある場合は、チェックサム検証ツール *を使用できます*。 たとえば、最後の数字が mod 9 計算を使用して検証されるチェックサム桁である 8 桁のライセンス番号に対して SIT を作成する必要があるとします。 チェックサム アルゴリズムは次のように設定しました。

Sum = digit 1 * Weight 1 + digit 2 * weight 2 + digit 3 * weight 3 + digit 4 * weight 4 + digit 5 * weight 5 + digit 6 * weight 6 + digit 7 * weight 7 + digit 8 * Weight 8 Mod value = Sum % 9 If Mod value == digit 8 Account number is valid If Mod value != digit 8 Account number is invalid

1. 次の正規表現を使用してプライマリ要素を定義します。

   ```console
   \d{8}
   ```

2. 次に、チェックサム検証ツールを追加します。
3. 重み値をコンマで区切って追加し、チェック桁の位置と Mod 値を追加します。 Modulo 操作の詳細については、「Modulo 操作 [」を参照してください](https://en.wikipedia.org/wiki/Modulo_operation)。

> [!NOTE]
> チェック桁がチェックサム計算の一部ではない場合は、チェック桁の重みとして 0 を使用します。 たとえば、上記の場合、チェック桁を使用してチェック桁を計算しない場合、重み 8 は 0 に等しくなります。  Modulo_operation)。

![構成済みのチェックサム検証ツールのスクリーンショット。](../media/checksum-validator.png)

### <a name="date-validator"></a>日付検証

正規表現に埋め込まれた日付値が、作成する新しいパターンの一部である場合は、日付検証ツールを使用して、条件を満たした日付をテストできます。 たとえば、9 桁の従業員 ID 番号の SIT を作成するとします。 最初の 6 桁は DDMMYY 形式の採用日であり、最後の 3 桁はランダムに生成された数値です。 最初の 6 桁の数字が正しい形式で表示されていることを検証します。

1. 次の正規表現を使用してプライマリ要素を定義します。

   ```console
   \d{9}
   ```

2. 次に、日付検証機能を追加します。
3. 日付形式と開始オフセットを選択します。 日付文字列は最初の 6 桁の数字で、オフセットは `0` .

![構成済みの日付検証ツールのスクリーンショット。](../media/date-validator.png)

### <a name="functional-processors-as-validators"></a>バリデーターとしての機能プロセッサ

関数プロセッサは、最も一般的に使用される一部の SIT に対してバリデーターとして使用できます。 これにより、独自の正規表現を定義しながら、SIT で必要な追加のチェックに合格することができます。 たとえば、Func_India_Aadharによって定義されたカスタム正規表現が、インドの Aadhar カードに必要な検証ロジックを渡す必要があります。 検証機能として使用できる DLP 関数の詳細については、「DLP 関数が探す [情報」を参照してください](what-the-dlp-functions-look-for.md#what-the-dlp-functions-look-for)。 

### <a name="luhn-check-validator"></a>Luhn check validator

Luhn アルゴリズムを渡す必要がある正規表現を含むカスタムの機密情報の種類がある場合は、Luhn チェック検証ツール [を使用できます](https://en.wikipedia.org/wiki/Luhn_algorithm)。

## <a name="more-information-on-additional-checks"></a>その他のチェックの詳細情報

利用可能な追加のチェックの定義と例を次に示します。

**特定の一致の除外**: このチェックでは、編集しているパターンの一致を検出するときに除外するキーワードを定義できます。 たとえば、有効な数値と一致しないので、'4111111111111111' などのテスト用クレジット カード番号を除外することができます。

**文字** で始まる または始まらない: このチェック ボックスを使用すると、一致する項目で始まる必要がある文字または一致する項目で始まってはならない文字を定義できます。 たとえば、41、42、または 43 で始まるクレジット カード番号のみを検出する場合のようにパターンで 検出する場合は、[**最初は** ] を選び、一覧に 41、42、43 をコンマで区切って追加します。 

**文字** で終わるまたは終わらない:このチェックボックスを使用すると、一致する項目が終わる必要がある文字または一致する項目が終わってはならない文字を定義できます。 たとえば、従業員 ID の番号が 0 または 1 で終わる場合は、[**最後は** ではない] を選択して、一覧に 0 と 1 をコンマで区切って追加します。

**重複する文字を除外**: このチェック ボックスをオンにした場合、すべての桁が同一の一致を無視できます。 たとえば、6 桁の従業員 ID 番号ですべての数字が同じ数字になってはいけない場合 **重複する文字を除外** を選択して、111111、222222、333333、444444、555555、666666、777777、888888、999999、および 000000 を従業員 ID の有効な一致のリストから除外します。

**プレフィックスを含める、または除外する**: このチェックでは、一致するエンティティの直前に存在する必要があるキーワードまたは存在してはいけないキーワードを定義できます。 選択内容に応じて、ここに含まれるプレフィックスを前に持つ、一致または一致しないエンティティになります。 たとえば、プレフィックス **GUID:** を **除外** する場合、**GUID:** を頭に持つエンティティは、一致とは見なされません。

**サフィックスを含める、または除外する**: このチェックでは、一致するエンティティの直後に存在する必要があるキーワードまたは存在してはいけないキーワードを定義できます。 選択内容に応じて、ここに含まれるサフィックスを最後に持つ、一致または一致しないエンティティになります。 たとえば、サフィックス **:GUID** を **除外** する場合、**:GUID** が後に続くテキストは一致としません。


> [!NOTE]
> Microsoft 365 Information Protection は、次のような場合に 2 バイト文字セットの言語をサポートします。
> - 中国語 (簡体字)
> - 中国語 (繁体字)
> - 韓国語
> - 日本語
>
>このサポートは、機密情報の種類で使用できます。 詳細については、「[2バイト文字セットのリリースノート (preview) についての情報保護サポー](mip-dbcs-relnotes.md)」を参照してください。

> [!TIP]
> 中国語/日本語の文字と 1 バイト文字を含むパターンを検出する、または中国語/日本語と英語を含むパターンを検出するには、キーワードまたは正規表現の 2 つのバリエーションを定義します。 
> - たとえば、「机密的ドキュメント」のようなキーワードを検出するには、キーワードの 2 つのバリエーションを使用します。 1 つは日本語と英語のテキストの間にスペースがあり、もう 1 つは日本語と英語のテキストの間にスペースがありません。 したがって、SITに追加するキーワードは、"机密的 document" と "机密的document" である必要があります。 同様に、"東京オリンピック2020" というフレーズを検出するには、"東京オリンピック 2020" と "東京オリンピック2020" の 2 つのバリエーションを使用する必要があります。
>
> 中国語/日本語/ 2 バイト文字に加えて、キーワード/フレーズのリストに中国語/日本語以外の単語も含まれている場合 (英語のみなど)、2 つの辞書/キーワード リストを作成することをお勧めします。 1 つは中国語/日本語/ 2 バイト文字を含むキーワード用で、もう1 つは英語のみ用です。 
> - たとえば、"Highly confidential"、"機密性が高い"、"机密的document" の 3 つのフレーズを含むキーワード辞書/リストを作成する場合は、2 つのキーワード リストを作成する必要があります。 
>     1. Highly confidential
>     2. 機密性が高い、机密的document、机密的 document
>
> 2 バイトのハイフンまたは 2 バイトのピリオドを使用して正規表現を作成するときは、正規表現のハイフンまたはピリオドをエスケープするように、必ず両方の文字をエスケープしてください。参考までに、サンプルの正規表現を次に示します。
>    - (?<!\d)([４][０-９]{3}[\-?\－\t]*[０-９]{4}
>
> キーワード リストでは、単語の一致ではなく文字列の一致を使用することをお勧めします。
